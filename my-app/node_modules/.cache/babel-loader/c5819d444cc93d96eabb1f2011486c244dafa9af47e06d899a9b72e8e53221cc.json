{"ast":null,"code":"var _jsxFileName = \"D:\\\\02sfk\\\\code\\\\demo4\\\\my-app\\\\src\\\\components\\\\TaskList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './TaskList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TaskList() {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const response = await fetch('http://localhost:5000/api/tasks');\n        if (!response.ok) {\n          throw new Error('获取任务列表失败');\n        }\n        const data = await response.json();\n        setTasks(data);\n        setError(null);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchTasks();\n    const interval = setInterval(fetchTasks, 3000); // 每3秒更新一次\n\n    return () => clearInterval(interval);\n  }, []);\n  const getStatusText = status => {\n    const statusMap = {\n      'pending': '等待中',\n      'running': '进行中',\n      'completed': '已完成',\n      'failed': '失败'\n    };\n    return statusMap[status] || status;\n  };\n  const getStatusClass = status => {\n    return `status-badge ${status}`;\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u52A0\\u8F7D\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\u9519\\u8BEF: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"task-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u91C7\\u96C6\\u4EFB\\u52A1\\u5217\\u8868\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), tasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"no-tasks\",\n      children: \"\\u6682\\u65E0\\u4EFB\\u52A1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-grid\",\n      children: tasks.map(task => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"task-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: task.query\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: getStatusClass(task.status),\n            children: getStatusText(task.status)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u7C7B\\u578B: \", task.task_type === 'keyword' ? '关键词搜索' : task.task_type === 'user' ? '用户数据' : '版块数据']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u76EE\\u6807\\u6570\\u91CF: \", task.target_count]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u5DF2\\u91C7\\u96C6: \", task.current_count || 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            style: {\n              width: `${task.progress || 0}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"progress-text\",\n            children: [Math.round(task.progress || 0), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u521B\\u5EFA\\u65F6\\u95F4: \", new Date(task.created_at).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), task.completed_at && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u5B8C\\u6210\\u65F6\\u95F4: \", new Date(task.completed_at).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 19\n          }, this), task.error_message && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: [\"\\u9519\\u8BEF: \", task.error_message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this)]\n      }, task.task_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(TaskList, \"26pFup7jtL6OJ6wPzUtWbVs2CLY=\");\n_c = TaskList;\nexport default TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","TaskList","_s","tasks","setTasks","isLoading","setIsLoading","error","setError","fetchTasks","response","fetch","ok","Error","data","json","err","message","interval","setInterval","clearInterval","getStatusText","status","statusMap","getStatusClass","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","task","query","task_type","target_count","current_count","style","width","progress","Math","round","Date","created_at","toLocaleString","completed_at","error_message","task_id","_c","$RefreshReg$"],"sources":["D:/02sfk/code/demo4/my-app/src/components/TaskList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './TaskList.css';\r\n\r\nfunction TaskList() {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchTasks = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/tasks');\r\n        if (!response.ok) {\r\n          throw new Error('获取任务列表失败');\r\n        }\r\n        const data = await response.json();\r\n        setTasks(data);\r\n        setError(null);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTasks();\r\n    const interval = setInterval(fetchTasks, 3000); // 每3秒更新一次\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const getStatusText = (status) => {\r\n    const statusMap = {\r\n      'pending': '等待中',\r\n      'running': '进行中',\r\n      'completed': '已完成',\r\n      'failed': '失败'\r\n    };\r\n    return statusMap[status] || status;\r\n  };\r\n\r\n  const getStatusClass = (status) => {\r\n    return `status-badge ${status}`;\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"loading\">加载中...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">错误: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"task-list\">\r\n      <h2>采集任务列表</h2>\r\n      {tasks.length === 0 ? (\r\n        <p className=\"no-tasks\">暂无任务</p>\r\n      ) : (\r\n        <div className=\"task-grid\">\r\n          {tasks.map(task => (\r\n            <div key={task.task_id} className=\"task-card\">\r\n              <div className=\"task-header\">\r\n                <h3>{task.query}</h3>\r\n                <span className={getStatusClass(task.status)}>\r\n                  {getStatusText(task.status)}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"task-info\">\r\n                <p>类型: {\r\n                  task.task_type === 'keyword' ? '关键词搜索' :\r\n                  task.task_type === 'user' ? '用户数据' : '版块数据'\r\n                }</p>\r\n                <p>目标数量: {task.target_count}</p>\r\n                <p>已采集: {task.current_count || 0}</p>\r\n              </div>\r\n\r\n              <div className=\"progress-container\">\r\n                <div \r\n                  className=\"progress-bar\"\r\n                  style={{width: `${task.progress || 0}%`}}\r\n                ></div>\r\n                <span className=\"progress-text\">\r\n                  {Math.round(task.progress || 0)}%\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"task-footer\">\r\n                <p>创建时间: {new Date(task.created_at).toLocaleString()}</p>\r\n                {task.completed_at && (\r\n                  <p>完成时间: {new Date(task.completed_at).toLocaleString()}</p>\r\n                )}\r\n                {task.error_message && (\r\n                  <p className=\"error-message\">错误: {task.error_message}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TaskList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}